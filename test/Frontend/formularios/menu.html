<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Menú Parque de Atracciones</title>
	<link rel="stylesheet" href="../css/menu_moderno.css">
</head>
<body>
	<button onclick="cerrarSesion()" style="position:absolute;top:20px;right:30px;padding:8px 16px;background:#dc3545;color:#fff;border:none;border-radius:5px;cursor:pointer;">Cerrar Sesión</button>
	<div class="user-info-box">
        <span class="user-icon">👤</span>
        <span id="nombreUsuario"></span>
        <span id="rolUsuario"></span>
    </div>
	<div class="menu-container">
		<h2>Menú Principal</h2>
		<ul class="menu-list">
			<li><a href="usuarios.html">Gestión de Usuarios</a></li>
			<li><a href="terapeutas.html" onclick="alert('BIENVENIDO')">Gestión de Terapeutas</a></li>
			<li><a href="pacientes.html" onclick="alert('Bienvenido a la Gestión de Pacientes')">Gestión de Pacientes</a></li>
			<li><a href="terapias.html" onclick="alert('Gestión de Terapias')">Gestión de Terapias</a></li>
			<li><a href="sesiones.html" onclick="alert('Gestión de Sesiones')">Gestión de Sesiones</a></li>
			<li><a href="pagos.html" onclick="alert('Generación de pagos')">Generación de pagos</a></li>
		    <li><a href="productos.html" onclick="alert('Generación de productos')">Generación de productos</a></li>

		</ul>
	</div>
	<script src="../js/menu.js"></script>
	<script>
	function cerrarSesion() {
		localStorage.clear();
		sessionStorage.clear();
		window.location.href = 'login.html';
	}
	// Mostrar nombre_usuario y rol si están en localStorage
	document.addEventListener('DOMContentLoaded', function() {
		const nombre = localStorage.getItem('nombre_usuario');
		const rol = localStorage.getItem('rol');
		if (nombre) document.getElementById('nombreUsuario').textContent = 'Usuario: ' + nombre;
		if (rol) document.getElementById('rolUsuario').textContent = 'Rol: ' + rol;
	});
	</script>
	<script>
    function filtrarMenuPorRol() {
        const rol = localStorage.getItem('rol');
        const menuList = document.querySelector('.menu-list');
        const opciones = {
            'Supervisor': ['Gestión de Pacientes', 'Gestión de Sesiones'],
            'Desarrollador': ['Gestión de Usuarios', 'Gestión de Terapeutas', 'Gestión de Pacientes', 'Gestión de Terapias', 'Gestión de Sesiones'],
            'Administrador': ['Gestión de Usuarios', 'Gestión de Terapeutas', 'Gestión de Pacientes', 'Gestión de Terapias', 'Gestión de Sesiones', 'Generación de pagos', 'Generación de productos']
        };

        if (rol && opciones[rol]) {
            const elementosPermitidos = opciones[rol];
            Array.from(menuList.children).forEach(li => {
                const texto = li.textContent.trim();
                if (!elementosPermitidos.includes(texto)) {
                    li.style.display = 'none';
                }
            });
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const nombre = localStorage.getItem('nombre_usuario');
        const rol = localStorage.getItem('rol');
        if (nombre) document.getElementById('nombreUsuario').textContent = 'Usuario: ' + nombre;
        if (rol) document.getElementById('rolUsuario').textContent = 'Rol: ' + rol;

        filtrarMenuPorRol();
    });
    </script>
</body>
</html>
